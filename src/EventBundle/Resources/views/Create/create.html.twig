{% extends '::base.html.twig' %}
{% block stylesheets %}
<link rel="stylesheet" href="{{asset("/css/eventNew.css")}}">
{% endblock %}
{% block body %}

<div class="container-fluid" style="margin-left:10px;">
  <br>
<h1>Crear nuevo evento</h1>
{{ form_start(form) }}
<div class="row">
  <!-- titulo -->
    {{ form_label(form.title) }}
    {{ form_errors(form.title) }}
    {{ form_widget(form.title) }}
</div>

<div class="row">
  <!-- fecha de inicio -->
  <div class="dateblock">
    {{ form_label(form.startDate) }}
    {{ form_errors(form.startDate) }}
    <br>
    {{ form_widget(form.startDate) }}
  </div>
<br>

      {{ form_label(form.startTime) }}
      {{ form_errors(form.startTime) }}
      <br>
      {{ form_widget(form.startTime) }}

<!-- fecha de fin -->
  <div class="dateblock">
    {{ form_label(form.endDate) }}
    {{ form_errors(form.endDate) }}
    <br>
    {{ form_widget(form.endDate) }}
  </div>

<br>
      {{ form_label(form.endTime) }}
      {{ form_errors(form.endTime) }}
      <br>
      {{ form_widget(form.endTime) }}
</div>

<div class="row">
  <!-- imagen de evento  -->
    {{ form_label(form.images) }}
    {{ form_errors(form.images) }}
    {{ form_widget(form.images) }}
    <div class="imageDiv" ondrop="drop(event)" ondragover="allowDrop(event)">
      <div class="more" onclick="$('input:file').click();">
        <span id="plus" class="glyphicon glyphicon-plus-sign">+</span>
      </div>
      <div id="gallery">
      </div>
      </div>
</div>

<div class="container">
  <div class="row row-centered">
    <div class="col-xs-8 col-sm-8 col-md-4 col-lg-4 col-xl-4 col-centered">
      <div class="form-group">
        <label for="user_orchards">Ubicación</label>
        <select class="form-control" id="user_orchards">
          {% for orchard in app.user.orchard %}
          {% if orchard.name != null %}
          <option id="{{ orchard.id }}">{{ orchard.name }}</option>
          {% endif %}
          {% endfor %}
          {% if orchardRelated != null %}
          <input id="orchardRelated" type="text" name="" value="{{ orchardRelated.name }}" hidden="hidden">
          {% endif %}
        </select>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <!-- descripcion -->
    {{ form_label(form.description) }}
    {{ form_errors(form.description) }}
    <br>
    {{ form_widget(form.description) }}
</div>

<div class="row">
  <!-- nº de plazas -->
    {{ form_label(form.places) }}
    {{ form_errors(form.places) }}
    {{ form_widget(form.places) }}
<!-- boolean mostrar nºplazas -->
    {{ form_widget(form.showPlaces) }}
    {{ form_label(form.showPlaces) }}
    {{ form_errors(form.showPlaces) }}

</div>

<div class="row">
  <!-- precio -->
    {{ form_label(form.price) }}
    {{ form_errors(form.price) }}
    {{ form_widget(form.price) }}
</div>

<div class="row">
    {{ form_widget(form.guardar) }}
</div>

{{ form_end(form) }}

</div>
{% endblock %}
{% block javascripts %}
<script type="text/javascript">
//cargar imagenes con click
var imagenes = new Array();
var id = 0;
var maxfiles = 1;
$("input:file").change(function(){
  console.log("detectando cambios en input");
  previewImage(this.files[0]);
});

if($('#orchardRelated').val()) {
  $('#user_orchards').val($('#orchardRelated').val());
}

$('#eventbundle_event_id_orchard').val($( "#user_orchards option:selected" ).attr('id'));

$('#user_orchards').on('change', function() {
  $('#eventbundle_event_id_orchard').val($( "#user_orchards option:selected" ).attr('id'));
});

</script>
<script src="{{asset("/js/event.js")}}" charset="utf-8"></script>

{% endblock %}
