{% extends '::step_base.html.twig' %}
{% block currentStep %}
    1
    <span class="step-title">
        : Cuenta la filosofía de tu huerto
    </span>
{% endblock %}
{% block body %}

    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 steps-left">
            <h3>{{ 'orchard.step31.title'|trans }}</h3>
            <form class="steps-left-content">
                <div class="row steps-left-innerContent">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <label for="ProjectStart">{{ 'orchard.step31.title-2'|trans }}</label>
                        <span id="start-chars">500</span>
                        <textarea rows="4" cols="50" class="form-control" id="ProjectStart" placeholder="{{ 'orchard.step31.title-2-1'|trans }}" maxlength="500">{{ orchard.projectStart }}</textarea>
                    </div>
                  </div>
                    <div class="row steps-left-innerContent">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <label for="GovernanceModel">{{ 'orchard.step31.title-3'|trans }}</label>
                            <span id="governance-chars">500</span>
                            <textarea rows="4" cols="50" class="form-control" id="GovernanceModel" placeholder="{{ 'orchard.step31.title-3-1'|trans }}" maxlength="500">{{ orchard.governanceModel }}</textarea>
                        </div>
                    </div>

                <input type="text" id="Step" hidden="hidden" value="32">

            </form>

            
            <div class="buttons">
                <button type="submit" name="button" class="btn btn-outline-primary delete-button btn-atras">{{ 'orchard.step11.back'|trans }}</button>
                <button type="reset" name="button" class="btn save-button btn-siguiente">{{ 'orchard.step11.next'|trans }}</button>
            </div>

            
            <div class="fixed-buttons">
                <button type="button" class="btn btn-outline-primary delete-button col-xs-6 col-sm-6 col-md-6 col-lg-6 btn-atras">{{ 'orchard.step11.back'|trans }}</button>
                <button type="submit" class="btn save-button col-xs-6 col-sm-6 col-md-6 col-lg-6 btn-siguiente">{{ 'orchard.step11.next'|trans }}</button>
            </div>

        </div>

        
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 steps-right">
            <h1 style="line-height: 1.5; font-weight: bold;">CUÉNTALE QUIENES ESTÁIS DETRÁS DEL PROYECTO</h1>
            <p>Lo que os motivó a empezar o cuáles son los valores de vuestro proyecto</p>
        </div>

    </div>

    <script type="text/javascript">
        $(document).ready(function() {

            $('#progressbar').val(localStorage.getItem('lastProgress')).animate({
                'value': 80 + '%',
                'aria-valuenow': 80
            }, {
                duration: 400,
                easing: 'linear'
            });

            $('textarea').each(function() {
                var length = $(this).val().length;
                if (length) {
                    $('.btn-siguiente').html('{{ 'orchard.step11.next'|trans }}');
                } else if (checkEmpty()) {
                    $('.btn-siguiente').html('{{ 'orchard.step21.nowNo'|trans }}');
                }
            });

            function checkEmpty() {
                var empty = true;
                $('textarea').each(function() {
                    if (this.value != "") {
                        empty = false;
                    }
                })
                return empty;
            }

            //contador de caracteres restantes
            var maxLength = 500;
            $('textarea').keyup(function() {
                var length = $(this).val().length;
                if (length) {
                    $('.btn-siguiente').html('{{ 'orchard.step11.next'|trans }}');
                } else if (checkEmpty()) {
                    $('.btn-siguiente').html('{{ 'orchard.step21.nowNo'|trans }}');
                }
                var length = maxLength - length;
                $(this).prev().text(length);
                if (length == 0) {
                    $(this).addClass("ta-maxlength");
                } else {
                    $(this).removeClass("ta-maxlength");
                }
            });
        });
    </script>

{% endblock %}
