{% extends '::base.html.twig' %}

{% block body %}

<div class="row steps">
  <div class="col-xs-12 col-md-5 col-lg-5 steps-left">
    {% if app.user != null %}
    <h1 class="display-4">ยก{{ 'orchard.steps.title'|trans }} {{ app.user.username }}!</h1>
    {% endif %}
    <h6>{{ 'orchard.steps.title-2'|trans }}</h6>

    <div class="row">
      <div class="col-xs-12 col-md-12 col-lg-12 steps-left">
        <h6>{{ 'orchard.steps.step'|trans }} 1</h6>
        {% if orchard.step is defined and orchard.step >= 21 %}<!--todos los pasos del 1 completados-->
        <i class="fa fa-check fa-2x" aria-hidden="true"></i>
        {% endif %}
        <h5>{{ 'orchard.steps.sub-1'|trans }}</h5>
        {% if orchard.step is defined %}
        {% if orchard.step >= 15 %}
        <a href="/orchard/create/step/11/{{ orchard.id }}"><button type="button" class="btn btn-primary btn-steps">{{ 'orchard.steps.btn-change'|trans }}</button></a>
        {% elseif orchard.step == 11 %}
        <a href="/orchard/create/step/11/{{ orchard.id }}"><button type="button" class="btn btn-primary btn-steps">{{ 'orchard.steps.btn-start'|trans }}</button></a>
        {% else %}
        <a href="/orchard/create/step/{{ orchard.step }}/{{ orchard.id }}"><button type="button" class="btn btn-primary btn-steps">{{ 'orchard.steps.btn-continue'|trans }}</button></a>
        {% endif %}
        {% endif %}
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12 col-md-12 col-lg-12 steps-left">
        <h6>{{ 'orchard.steps.step'|trans }}  2</h6>
        {% if orchard.step is defined and orchard.step >= 31 %}<!--todos los pasos del 2 completados-->
        <i class="fa fa-check fa-2x" aria-hidden="true"></i>
        {% endif %}
        <h5 class="stepNone" id="paso2">{{ 'orchard.steps.sub-2'|trans }}</h5>
        {% if orchard.step is defined and orchard.step >= 21 %}
        {% if orchard.step >= 31 %}
        <a href="/orchard/create/step/21/{{ orchard.id }}"><button type="button" class="btn btn-primary btn-steps">{{ 'orchard.steps.btn-change'|trans }}</button></a>
        {% elseif orchard.step == 21 %}
        <a href="/orchard/create/step/21/{{ orchard.id }}"><button type="button" class="btn btn-primary btn-steps">{{ 'orchard.steps.btn-start'|trans }}</button></a>
        {% else %}
        <a href="/orchard/create/step/{{ orchard.step }}/{{ orchard.id }}"><button type="button" class="btn btn-primary btn-steps">{{ 'orchard.steps.btn-continue'|trans }}</button></a>
        {% endif %}
        {% endif %}
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12 col-md-12 col-lg-12 steps-left">
        <h6>{{ 'orchard.steps.step'|trans }} 3</h6>
        {% if orchard.step is defined and orchard.step >= 34 %}<!--todos los pasos del 3 completados-->
        <i class="fa fa-check fa-2x" aria-hidden="true"></i>
        {% endif %}
        <h5 class="stepNone" id="paso3">{{ 'orchard.steps.sub-3'|trans }}</h5>
        {% if orchard.step is defined and orchard.step >= 31 %}
        {% if orchard.step >= 34 %}
        <a href="/orchard/create/step/31/{{ orchard.id }}"><button type="button" class="btn btn-primary btn-steps">{{ 'orchard.steps.btn-change'|trans }}</button></a>
        {% elseif orchard.step == 31 %}
        <a href="/orchard/create/step/31/{{ orchard.id }}"><button type="button" class="btn btn-primary btn-steps">{{ 'orchard.steps.btn-start'|trans }}</button></a>
        {% else %}
        <a href="/orchard/create/step/{{ orchard.step }}/{{ orchard.id }}"><button type="button" class="btn btn-primary btn-steps">{{ 'orchard.steps.btn-continue'|trans }}</button></a>
        {% endif %}
        {% endif %}
      </div>
    </div>
    {% if orchard.step >= 14 %}
    <div class="row">
      <div class="col-xs-12 col-md-12 col-lg-12 steps-left">
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#orchardPreviewModal">{{ 'orchard.steps.btn-preview'|trans }}</button>
      </div>
    </div>
    {% endif %}
  </div>

  <div class="steps-right col-md-7 col-lg-7">
    <div class="steps-right-text">
      <h2 class="display-3">{{ 'orchard.steps.title-right'|trans }}</h2>
      <h1 class="display-4">{{ 'orchard.steps.title-right-2'|trans }}</h1>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="orchardPreviewModal" tabindex="-1" role="dialog" aria-labelledby="orchardPreviewModal" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <div class="row steps">
          <div class="col-xs-12 col-md-12 col-lg-12">
            {% if app.user != null %}
            <h1 class="display-4">{{ 'orchard.steps.title-preview'|trans }}{{ app.user.username }}</h1>
            {% endif %}

            {% if orchard.images != null and orchard.images is not empty %}

            <div class="row">
              <div class="col-xs-12 col-md-12 col-lg-12 ">
                <img class="previewImg" src="{{ asset('/orchard/image/' ~ orchard.images[0].nameImage) }}" alt="{{ orchard.images[0].description }}">
              </div>
            </div>

            <br>

            {% endif %}

            <h6>{{ 'orchard.steps.preview-2'|trans }}</h6>

            <div class="row">
              <div class="col-xs-12 col-md-12 col-lg-12 steps-left">
                {% for orchardType in orchard.orchardType %}
                <div class="type_orchard">{{ orchardType.name }}</div>
                {% endfor %}
              </div>
            </div>

            <h6>{{ orchard.projectStart }}</h6>

          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">{{ 'orchard.steps.preview-btn'|trans }}</button>
        <a href="/orchard/create/publish/{{ orchard.id }}/true"><button type="button" class="btn btn-primary">{{ 'orchard.steps.preview-btn'|trans }}</button></a>
      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block javascripts %}

<script type="text/javascript">

var step = {{ orchard.step }};

if (step >= 21) {
  $("#paso2").removeClass('stepNone');
}if (step >= 31) {
  $("#paso3").removeClass('stepNone');
}

</script>

{% endblock %}
